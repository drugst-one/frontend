<p-scrollPanel [style]='{height: "105vh", width: "100%"}'>
    <p-accordion [multiple]="true">
        <p-accordionTab header="DATA">
            <p-fieldset [toggleable]="true" [collapsed]="false">
                <ng-template pTemplate="header">
                    Database selection
                </ng-template>

                <app-dropdown title="Node Source" [items]="dataLists.identifierList" tooltip="TODO"
                              [model]="getConfig('identifier')"
                              (onChange)="changeConfig('identifier',$event)"></app-dropdown>
                <app-dropdown title="Protein-Protein Interaction DB" [items]="dataLists.protProtInterList"
                              [model]="getConfig('interactionProteinProtein')" tooltip="TODO"
                              (onChange)="changeConfig('interactionProteinProtein',$event)"></app-dropdown>
                <app-dropdown title="Drug-Protein Interaction DB" [items]="dataLists.drugProtInterList"
                              [model]="getConfig('interactionDrugProtein')" tooltip="TODO"
                              (onChange)="changeConfig('interactionDrugProtein',$event)"></app-dropdown>

            </p-fieldset>
        </p-accordionTab>
        <p-accordionTab header="CONFIGURATION">
            <p-fieldset [toggleable]="true" [collapsed]="false">
                <ng-template pTemplate="header">
                    Node Groups
                </ng-template>
                <div *ngIf="nodeGroups !=null &&objectSize(nodeGroups)>0">
                    <div *ngFor="let nodeGroup of (nodeGroups | keyvalue)">
                        <div [style]="{padding: 0, margin: '15px'}">
                            <p-fieldset [toggleable]="true" [collapsed]="true">
                                <ng-template pTemplate="header">
                                <span class="p-card-title">
                                Group: {{nodeGroup.key}}
                                </span>
                                    <app-niy-info class="side-label" pos="left"></app-niy-info>
                                </ng-template>
                                <app-textinput title="ID" [model]="nodeGroup.key"
                                               (onChange)="changeGroupConfig(nodeGroups,nodeGroup.key, 'id',$event)"
                                               tooltip="TODO"></app-textinput>
                                <div *ngFor="let nodeConf of (nodeGroup.value | keyvalue)"
                                     [style]="{padding: 0, margin: 0}">
                                    <div *ngIf="nodeConf.key === 'color'" style="margin-left: 5px">
                                        <app-colorpicker title="Node color" [model]="nodeConf.value" tooltip="TODO"
                                                         [format]="((nodeConf.value+'').startsWith('rgb') ? 'rgb': 'hex')"
                                                         (onChange)="changeGroupConfig(nodeGroups, nodeGroup.key, nodeConf.key, $event)"></app-colorpicker>
                                    </div>
                                    <div *ngIf="nodeConf.key === 'shape'"
                                         style="display: flex; justify-content: flex-start">
                                        <div [hidden]="nodeConf.value==='image'"
                                             style="padding-left: 12px;padding-top:5px">
                                            <label class="flex flex-self-left side-label" style="font-size: small">large
                                                <i
                                                        class="far fa-question-circle" pTooltip="TODO"
                                                        style="padding: 3px"></i></label>
                                            <div style="padding-top: 5px; min-width: 5vw;max-width: 5vw">
                                                <p-checkbox [label]=" isBig(nodeConf.value)? 'big' : 'normal'"
                                                            [ngModel]="isBig(nodeConf.value)" [binary]="true"
                                                            (onChange)="changeGroupConfig(nodeGroups, nodeGroup.key, nodeConf.key, generateStyle(nodeConf.value, $event.checked)); changeNodeImage(null,nodeGroup.key)"></p-checkbox>
                                            </div>
                                        </div>
                                        <div style="width: 100%">
                                            <app-dropdown [fill]="true" title="Shape" [items]="shapeList"
                                                          [model]="nodeConf.value"
                                                          (onChange)="changeGroupConfig(nodeGroups, nodeGroup.key, nodeConf.key, generateStyle($event,isBig(nodeConf.value)));"
                                                          tooltip="TODO"></app-dropdown>
                                            <app-textinput [hidden]="nodeConf.value!=='image'" title="imageURL"
                                                           [model]="nodeGroup.value['image']" tooltip="TODO"
                                                           (onChange)="changeNodeImage($event,nodeGroup.key)"></app-textinput>
                                        </div>
                                    </div>
                                    <app-textinput
                                            *ngIf="nodeConf.key !== 'color' && nodeConf.key !== 'shape' && nodeConf.key !=='image'"
                                            [title]="nodeConf.key"
                                            [model]="nodeConf.value"
                                            (onChange)="changeGroupConfig(nodeGroups, nodeGroup.key, nodeConf.key, $event)"
                                            tooltip="TODO"></app-textinput>
                                </div>
                                <p-divider></p-divider>
                                <div style="display: flex; justify-content: center">
                                    <p-button label="Delete" icon="fas fa-trash"
                                              styleClass="p-button-sm p-button-danger"
                                              (onClick)="deleteGroup(nodeGroups,nodeGroup.key)"></p-button>
                                </div>
                            </p-fieldset>
                        </div>
                    </div>
                </div>
                <div [style]="{padding: 0, margin: '15px'}">
                    <p-fieldset (click)="addNewNodeGroup()" [collapsed]="true">
                        <ng-template pTemplate="header">
                            <div style="padding:16px; cursor: pointer"><i class="pi pi-plus"></i> Add new Group</div>
                        </ng-template>
                    </p-fieldset>
                </div>
            </p-fieldset>
            <div style="height: 25px"></div>
            <p-fieldset legend="Edge Groups" [toggleable]="true" [collapsed]="false">
                <div *ngIf="edgeGroups !=null &&objectSize(edgeGroups)>0">
                    <div *ngFor="let group of (edgeGroups | keyvalue)">
                        <div [style]="{padding: 0, margin: '15px'}">
                            <p-fieldset [toggleable]="true" [collapsed]="true">
                                <ng-template pTemplate="header">
                                <span class="p-card-title">
                                Group: {{group.key}}
                                </span>
                                    <app-niy-info class="side-label" pos="left"></app-niy-info>
                                </ng-template>
                                <app-textinput title="ID" [model]="group.key"
                                               (onChange)="changeGroupConfig(edgeGroups,group.key, 'id',$event)"
                                               tooltip="TODO"></app-textinput>
                                <div *ngFor="let params of (group.value | keyvalue)"
                                     [style]="{padding: 0, margin: 0}">
                                    <div *ngIf="params.key === 'color'" style="margin-left: 5px">
                                        <app-colorpicker title="Node color" [model]="params.value" tooltip="TODO"
                                                         [format]="((params.value+'').startsWith('rgb') ? 'rgb': 'hex')"
                                                         (onChange)="changeGroupConfig(edgeGroups, group.key, params.key, $event)"></app-colorpicker>
                                    </div>
                                    <app-textinput *ngIf="params.key !== 'color' && params.key !=='dashes'"
                                                   [title]="params.key"
                                                   [model]="params.value"
                                                   (onChange)="changeGroupConfig(edgeGroups, group.key, params.key, $event)"
                                                   tooltip="TODO"></app-textinput>
                                </div>
                                <app-switch title="Dashed"
                                            [model]="group.value['dashes']!=null && group.value['dashes']!==false"
                                            (onChange)="changeGroupConfig(edgeGroups, group.key,'dashes',$event ? [3,3] : undefined)"></app-switch>
                                <div *ngIf="group.value['dashes'] !=null &&group.value['dashes'] !==false"
                                     style="display:flex">
                                    <div style="justify-content: flex-start; width: 50%">
                                        <app-range title="Dash size" tooltip="TODO" [model]="group.value['dashes'][0]"
                                                   [min]="1" [max]="100"
                                                   (onChange)="changeEdgeDashes(edgeGroups, group.key, 0,$event)"></app-range>
                                    </div>
                                    <div style="justify-content: flex-end; width: 50%">
                                        <app-range title="Gap size" tooltip="TODO" [model]="group.value['dashes'][1]"
                                                   [min]="1" [max]="100"
                                                   (onChange)="changeEdgeDashes(edgeGroups, group.key,  1,$event)"></app-range>
                                    </div>
                                </div>
                                <p-divider></p-divider>
                                <div style="display: flex; justify-content: center">
                                    <p-button label="Delete" icon="fas fa-trash"
                                              styleClass="p-button-sm p-button-danger"
                                              (onClick)="deleteGroup(edgeGroups,group.key)"></p-button>
                                </div>

                            </p-fieldset>
                        </div>
                    </div>
                </div>
                <div [style]="{padding: 0, margin: '15px'}">
                    <p-fieldset (click)="addNewEdgeGroup()" [collapsed]="true">
                        <ng-template pTemplate="header">
                            <div style="padding:16px; cursor: pointer"><i class="pi pi-plus"></i> Add new Group</div>
                        </ng-template>
                    </p-fieldset>
                </div>
            </p-fieldset>

        </p-accordionTab>
        <p-accordionTab header="INTERFACE" [selected]="true">
            <p-fieldset legend="Components" [toggleable]="true" [collapsed]="true" [style]="{marginBottom: '15px'}">
                <app-switch title="Show Footer"
                            [model]="getConfig('showFooter')==null || getConfig('showFooter') ===true"
                            (onChange)="changeConfig('showFooter',$event)"
                            tooltip="Adds or removes the left Footer."
                ></app-switch>
                <app-switch title="Show Legend"
                            [model]="getConfig('showLegend')==null || getConfig('showLegend') ===true"
                            (onChange)="changeConfig('showLegend',$event)"
                            tooltip="Adds or removes the Legend."
                ></app-switch>
                <app-switch title="Toggle left Sidebar"
                            [model]="leftSidebarEnabled()"
                            (onChange)="changeConfig('showLeftSidebar',$event)"
                            tooltip="Adds or removes the left panel from the configuration."
                ></app-switch>
                <div style="padding-left: 12px" [hidden]="!leftSidebarEnabled()">
                    <app-switch title="Show Overview Panel"
                                [model]="getConfig('showOverview')==null || getConfig('showOverview') ===true"
                                (onChange)="changeConfig('showOverview',$event)"
                                tooltip="TODO"
                    ></app-switch>
                    <app-switch title="Show Query Panel"
                                [model]="getConfig('showQuery')==null || getConfig('showQuery') ===true"
                                (onChange)="changeConfig('showQuery',$event)"
                                tooltip="TODO"
                    ></app-switch>
                </div>
                <app-switch title="Toggle right Sidebar"
                            [model]="rightSidebarEnabled()"
                            (onChange)="changeConfig('showRightSidebar',$event)"
                            tooltip="Adds or removes the right panel from the configuration."
                ></app-switch>
                <div style="padding-left: 12px" [hidden]="!rightSidebarEnabled()">
                    <app-switch title="Show Item Selector"
                                [model]="getConfig('showItemSelector')==null || getConfig('showItemSelector') ===true"
                                (onChange)="changeConfig('showItemSelector',$event)"
                                tooltip="TODO"
                    ></app-switch>
                    <app-switch title="Show Simple Analysis Panel"
                                [model]="getConfig('showSimpleAnalysis') ===true"
                                (onChange)="changeConfig('showSimpleAnalysis',$event)"
                                tooltip="TODO"
                    ></app-switch>
                    <app-switch title="Show Advanced Analysis Panel"
                                [model]="getConfig('showAdvAnalysis')==null || getConfig('showAdvAnalysis') ===true"
                                (onChange)="changeConfig('showAdvAnalysis',$event)"
                                tooltip="TODO"
                    ></app-switch>
                    <app-switch title="Show Selection Panel"
                                [model]="getConfig('showSelection')==null || getConfig('showSelection') ===true"
                                (onChange)="changeConfig('showSelection',$event)"
                                tooltip="TODO"
                    ></app-switch>
                    <app-switch title="Show Task Panel"
                                [model]="getConfig('showTasks')==null || getConfig('showTasks') ===true"
                                (onChange)="changeConfig('showTasks',$event)"
                                tooltip="TODO"
                    ></app-switch>
                </div>
            </p-fieldset>

            <p-fieldset legend="Legend" [toggleable]="true" [collapsed]="true" [style]="{marginBottom:'15px'}">
                <app-switch title="Show Legend"
                            [model]="getConfig('showLegend')==null || getConfig('showLegend') ===true"
                            (onChange)="changeConfig('showLegend',$event)"
                            tooltip="Adds or removes the Legend."
                ></app-switch>
                <div [hidden]="getConfig('showLegend')!=null && getConfig('showLegend') ===false" style="padding-left: 12px">
                    <app-dropdown [items]="legendPosList" [model]="getConfig('legendPos')" title="Legend Position"
                                  tooltip="TODO" (onChange)="changeConfig('legendPos',$event)"></app-dropdown>
                    <app-switch title="Use custom Legend" [model]="useLegendURL"
                                (onChange)="changeConfig('legendUrl',($event ? getConfig('legendUrl') : '')); useLegendURL=$event"></app-switch>
                    <app-textinput [hidden]="!useLegendURL" title="Legend Image URL" [model]="getConfig('legendUrl')"
                                   [disabled]="!useLegendURL"
                                   (onChange)="changeConfig('legendUrl',$event); useLegendURL=$event !==undefined && $event.length!==0"
                                   tooltip="Enter an image URL for your custom legend!"></app-textinput>
                    <app-switch title="Show Legend Nodes"
                                [model]="getConfig('showLegendNodes')==null || getConfig('showLegendNodes') ===true"
                                (onChange)="changeConfig('showLegendNodes',$event)"
                                tooltip="Adds or removes the different node types from the legend."
                                [hidden]="useLegendURL"
                    ></app-switch>
                    <app-switch title="Show Legend Edges"
                                [model]="getConfig('showLegendEdges')==null || getConfig('showLegendEdges') ===true"
                                (onChange)="changeConfig('showLegendEdges',$event)"
                                tooltip="Adds or removes the different edge types from the legend."
                                [hidden]="useLegendURL"
                    ></app-switch>
                    <app-textinput title="Legend Style Class" [model]="getConfig('legendClass')"
                                   (onChange)="changeConfig('legendClass',$event)" tooltip="TODO"></app-textinput>
                </div>
            </p-fieldset>
            <p-fieldset legend="Labels" [toggleable]="true" [collapsed]="true" [style]="{marginBottom:'15px'}">
                <app-textinput title="Analysis Task Name" [model]="getConfig('taskName')"
                               (onChange)="changeConfig('taskName',$event !=null && $event.length>0 ? $event : 'Run Task X')"
                               tooltip="Replaces the default 'Run Task X' label with some custom one."></app-textinput>

            </p-fieldset>

        </p-accordionTab>
        <p-accordionTab>
            <ng-template pTemplate="header">
                STYLE
                <app-niy-info class="side-label" pos="left"></app-niy-info>
            </ng-template>
            <i style="display: flex; justify-content: center; margin-left: auto">Custom coloring is not fully supported
                yet!</i>
            <div style="margin-bottom: 15px"></div>
            <app-colorpicker *ngFor="let color of theme | keyvalue" [title]="color.key" [model]="color.value" (onChange)="changeColor(color.key,$event)" tooltip="TODO"></app-colorpicker>
<!--            <app-colorpicker title="Background Color" [model]="theme.background" (onChange)="changeColor('background',$event)"-->
<!--                             tooltip="Defines the color primarily used in the plugin. Includes button background-colors and text coloring."></app-colorpicker>-->
<!--            <app-colorpicker title="Panel Background Color" [model]="theme['panel-background']" (onChange)="changeColor('panel-background',$event)"-->
<!--                             tooltip="Defines the color used to highlight valid outcomes or activated switches."></app-colorpicker>-->
<!--            <app-colorpicker title="Panel Border Color" [model]="theme['panel-border']" (onChange)="changeColor('panel-border',$event)"-->
<!--                             tooltip="Defines the color used to highlight invalid outcomes, errors or deactivated switches."></app-colorpicker>-->
<!--            <app-colorpicker title="Network Background Color" [model]="theme['network-background']" (onChange)="changeColor('network-background',$event)"-->
<!--                             tooltip="Defines the color used to highlight invalid outcomes, errors or deactivated switches."></app-colorpicker>-->
<!--            <app-colorpicker title="Background-Color" [model]="theme.background"-->
<!--                             (onChange)="changeColor('background',$event)"-->
<!--                             tooltip="Defines the background color of the whole plugin."></app-colorpicker>-->
<!--            <app-colorpicker title="Text-Color" [model]="theme.text" (onChange)="changeColor('text',$event)"-->
<!--                             tooltip="Defines the color of regular text. Should be adjusted according to the background color."></app-colorpicker>-->

        </p-accordionTab>

    </p-accordion>
</p-scrollPanel>
